<%- include('../layouts/admin_header.ejs') %>

<section class="content-main">
    <div class="content-header">
        <h2 class="content-title">Edit Category</h2>
        <div>
            <a href="/category/" class="btn btn-light rounded btn-sm"><i class="fas fa-arrow-left"></i> Back to categories</a>
        </div>
    </div>
    <div class="card mb-4">
        <div class="card-body">
            <form method="post" action="/category/edit_category/<%= category._id %>" class="col-md-8 mx-auto" onsubmit="return validateForm()">
                
                <div class="mb-4 text-center">
                    <label for="name" class="form-label">Category Name</label>
                    <input type="text" name="name" id="name" value="<%= category.name %>" placeholder="Category Name" class="form-control">
                    <div id="name-error" class="text-danger" style="display: none;">Category name is required.</div>
                </div>

                <div class="mb-4 text-center">
                    <label for="description" class="form-label">Category Description</label>
                    <input type="text" name="description" id="description" value="<%= category.description %>" placeholder="Category Description" class="form-control">
                    <div id="description-error" class="text-danger" style="display: none;">Category description is required.</div>
                </div>
               
                <div class="d-grid">
                    <button type="submit" class="btn btn-primary">Update Category</button>
                </div>
            </form>
        </div>
    </div>
</section>

<%- include('../layouts/admin_footer.ejs') %>

<script>
    function validateForm() {
        // Get input values
        const name = document.getElementById('name').value.trim();
        const description = document.getElementById('description').value.trim();
        
        let isValid = true;

        // Validate Category Name
        if (name === "") {
            document.getElementById('name-error').style.display = 'block';
            isValid = false;
        } else {
            document.getElementById('name-error').style.display = 'none';
        }

        // Validate Category Description
        if (description === "") {
            document.getElementById('description-error').style.display = 'block';
            isValid = false;
        } else {
            document.getElementById('description-error').style.display = 'none';
        }

        return isValid; // Only submit if the form is valid
    }
</script>
