<%- include("../layouts/user_header.ejs") %>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OTP Verification</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
</head>
<body>
    <div class="container d-flex justify-content-center align-items-center" style="min-height: 100vh;">
        <div class="card p-4 shadow-sm" style="width: 100%; max-width: 400px;">
            <!-- Display success message if any -->
            <% if (message) { %>
               
                    <%= message %>
                </div>
            <% } %>
    
            <h3 class="mb-4 text-center">OTP Verification</h3>
    
            <!-- OTP Verification Form -->
            <form id="otpForm" method="POST" action="/otp_forgotPassword">
                <!-- Enter OTP -->
                <div class="mb-3">
                    <label for="otp" class="form-label">Enter OTP</label>
                    <input
                        type="text"
                        class="form-control"
                        id="otp"
                        name="otp"
                        placeholder="Enter OTP"
                        maxlength="6"
                        required
                    >
                    <input type="hidden" name="userId" value="<%= user._id %>">
                </div>
    
                <!-- Submit Button -->
                <button type="submit" class="btn btn-primary w-100">Verify OTP</button>
    
                <!-- Error Message (if sent from server) -->
               
            </form>
    
            <!-- Resend OTP Link -->
            <p class="mt-3 text-center">
                Didn't receive the OTP? <a href="/resend-otp">Resend OTP</a>
            </p>
        </div>
    </div>
    
    <script>
        // Basic client-side validation for OTP
        document.getElementById('otpForm').addEventListener('submit', function (e) {
            const otp = document.getElementById('otp').value;

            // Check if OTP is 6 digits
            if (otp.length !== 6 || isNaN(otp)) {
                e.preventDefault();
                document.getElementById('errorMessage').innerText = "Please enter a valid 6-digit OTP.";
            }
        });
    </script>
</body>
</html>

<%- include("../layouts/user_header.ejs") %>


