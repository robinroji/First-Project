<%- include("../layouts/user_header.ejs") %>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css">
    <style>
        .cart-container { padding: 20px; }
        .cart-item { border-bottom: 1px solid #ddd; padding: 20px 0; }
        .order-summary { border: 1px solid #ddd; padding: 20px; border-radius: 5px; }
        .similar-products { padding-top: 20px; }
    </style>
</head>
<body>

<div class="container cart-container">
    <h1 class="mb-4">WishList</h1>
    
    <!-- Cart Items Section -->
    <!-- Cart Items Section -->
<% if (product && product.length > 0) { %>
    <% product.forEach(item => { %>
        <div class="cart-item row align-items-center mb-3">
            <div class="col-2">
                <!-- Displaying the first image in product_image array -->
                <img src="/newfile/<%= item.product.product_image[0] %>" alt="<%= item.product.product_name %>" class="img-fluid rounded">
            </div>
            <div class="col-3">
                <h6 class="mb-0"><%= item.product.product_name %></h6>
            </div>
            <div class="col-2 text-center">
                <span class="d-block text-muted">Regular Price:</span>
                <h6 class="mb-0"><%= item.product.product_regular_price %></h6>
            </div>
            <div class="col-2 text-center">
                <span class="d-block text-muted">Sales Price:</span>
                <h6 class="mb-0"><%= item.product.product_sale_price %></h6>
            </div>
            <div class="col-3 text-end">
                <form action="/remove_product/<%= item._id %>" method="post">
                    <div>
                        <button type="submit" class="btn btn-outline-danger btn-sm">Remove</button>
                    </div>
                    <br>
                </form>
                    <div> 
                            <form action="/move_to_cart/<%= item.product._id %>" method="get">
                                <button> Add to cart</button>
                            </form>
                    </div>
            </div>
        </div>
    <% }); %>
<% } else { %>
    <p>Your cart is empty.</p>
<% } %>

    

    <!-- Order Summary Section -->
    <!-- <div class="order-summary mt-4">
        <h4>Order Summary</h4>
        <p>Subtotal: $</p>
        <p>Discount: $</p>
        <h5>Total: $</h5>
        <a href="/checkout" class="btn btn-primary btn-block mt-3">Proceed to Checkout</a>
    </div> -->

    <!-- Similar Products Section -->
    <div class="similar-products mt-5">
        <!-- <h4>You might also like</h4> -->
        <!--  -->
    </div>
</div>

</body>
</html>

<%- include("../layouts/user_footer.ejs") %>
