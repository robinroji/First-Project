<%-include ('../layouts/user_header') %>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<style>
    body {
        background-color: #f4f4f4;
    }
    .profile-container {
        max-width: 1200px;
        margin: 50px auto;
        padding: 20px;
        background-color: #ffffff;
        border-radius: 10px;
        box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-direction: row;
    }
    .profile-sidebar {
        width: 25%;
        padding-right: 20px;
        border-right: 1px solid #ddd;
    }
    .profile-content {
        width: 75%;
        padding-left: 20px;
    }
    .profile-header {
        display: flex;
        align-items: center;
        margin-bottom: 30px;
    }
    .profile-header img {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        margin-right: 20px;
        object-fit: cover;
    }
    .profile-header h2 {
        margin: 0;
        font-size: 1.5rem;
        color: #333;
    }
    .profile-header p {
        color: #777;
    }
    .form-group {
        margin-bottom: 20px;
    }
    .form-group label {
        font-weight: bold;
        margin-bottom: 5px;
        display: block;
    }
    .form-control {
        border-radius: 5px;
        border: 1px solid #ccc;
        height: 45px;
    }
    .section-title {
        font-size: 1.25rem;
        margin-bottom: 20px;
        color: #007bff;
        border-bottom: 2px solid #007bff;
        padding-bottom: 10px;
    }
    .btn-primary {
        background-color: #007bff;
        border-color: #007bff;
        padding: 10px 20px;
        font-size: 1rem;
    }
    .nav-link {
        color: #007bff;
        margin-bottom: 15px;
        display: block;
        font-size: 1rem;
    }
    .nav-link:hover {
        text-decoration: underline;
    }
</style>
</head>
<body>
<div class="container profile-container">

    <script> 
        <% if (typeof message !== 'undefined' && message) { %>
            Swal.fire({
                title: '<%= alertType === "success" ? "Success" : "Error" %>',
                text: '<%= message %>',
                icon: '<%= alertType %>',
                confirmButtonText: 'OK'
            });
        <% } %>

    </script>
  

    <!-- Sidebar -->
    <div class="profile-sidebar">
        <h3>Account</h3>
        <a href="#" class="nav-link">Overview</a>
        <a href="/orders" class="nav-link">My Orders</a>
        <a href="/addressPage" class="nav-link">Manage Address</a>
        <a href="/wallet" class="nav-link">Wallet</a>
        <a href="/logout" class="nav-link">Logout</a>
    </div>

    <!-- Profile Content -->
    <div class="profile-content">
        <div class="profile-header">
            <div>
                <h2><%= user.firstname %></h2>
                <p><%= user.email %></p>

            </div>
        </div>

        <form action='/personal_edit/' method="post">
            <div class="section-title">Personal Information</div>
            

            <div class="row">
                <div class="col-md-6 form-group">
                    <label for="firstName">First Name</label>
                    <input type="text" id="firstName" name="firstName" class="form-control"  value="<%= user.firstname%>">
                </div>
                <div class="col-md-6 form-group">
                    <label for="lastName">Last Name</label>
                    <input type="text" id="lastName" name="lastName" class="form-control" placeholder="User last name" value="<%= user.lastname %>">
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 form-group">
                    <label for="dob">Date of Birth</label>
                    <input type="date" id="dob" name="dob" class="form-control" value="<%= user.DOB %>">
                </div>
               
            </div>
            
            <button type="submit" class="btn btn-primary">Update</button>
        </form>
        <br>


        <form action='/contact_edit' method="post">

            <div class="section-title">Contact Information</div>

            <div class="row">
                <div class="col-md-6 form-group">
                    <label for="mobile">Mobile Number</label>
                    <input type="text" id="mobile" name="mobile" class="form-control" placeholder="+91 1234567890" value="<%= user.phone %>">
                </div>
                <div class="col-md-6 form-group">
                    <label for="alternateMobile">Alternate Number (Optional)</label>
                    <input type="text" id="alternateMobile" name="alternateMobile" class="form-control" placeholder="+91 0987654321" value="<%= user.alt_phone %>">
                </div>
            </div>


              
            <button type="submit" class="btn btn-primary">Update</button>
        </form>
        <br>

        <form action='/pass_edit' method="post" id="passwordForm" >



            <div class="section-title"   >Change Password</div>

            <div class="row">
                <div class="col-md-6 form-group">
                    <label for="oldPassword">Old Password</label>
                    <input type="password" id="oldPassword" name="oldPassword" class="form-control" placeholder="Old Password">
                </div>
                <div class="col-md-6 form-group">
                    <label for="newPassword">New Password</label>
                    <input type="password" id="newPassword" name="newPassword" class="form-control" placeholder="New Password">
                    <div class="error"  id="newPasswordError"> </div>
                </div>

                <div class="col-md-6 form-group">
                    <label for="confirmNewPassword"> Confirm New Password</label>
                    <input type="password" id="confirmNewPassword" name="confirmNewPassword" class="form-control" placeholder="Confirm New Password">
                    <div class="error"  id="confirmNewPasswordError"> </div>
                </div>

            </div>

            <button type="submit" class="btn btn-primary">Update</button>
        </form>
        <br>


    </div>
</div>
     


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>



<!-- <script>
    document.getElementById('passwordForm').addEventListener('submit', function (event) {
        const newPassword = document.getElementById('newPassword').value.trim();
        const confirmNewPassword = document.getElementById('confirmNewPassword').value.trim();

        let isValid = true; // Declare `let` explicitly

        if (confirmNewPassword !== newPassword) {
            document.getElementById('confirmNewPasswordError').innerText = 'Passwords do not match.';
            isValid = false;
        }

        if (!isValid) {
            event.preventDefault(); // Prevent form submission if validation fails
        }
        alert('password changed')
    });
</script> -->

<%-include ('../layouts/user_footer') %>
